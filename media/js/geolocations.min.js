(function(b){b(document).ready(function(){b('[onclick*="geolocations.parse"]').attr("id","geolocationsParse").removeAttr("onclick");b("#geolocationsParse").on("click",function(){a()})});function a(){var k=b("#results"),m=k.find(".error"),d=k.find(".progress"),l=d.find(".bar"),c=d.find(".text"),n=0,f=b("form"),g=f.find('input[name*="step"]').val(),j=0;var e={},h=b(f).serializeArray();b(h).each(function(p,q){var o=q.name;e[o]=q.value});e.task="geolocations.parse";e.first="true";k.hide();m.hide();m.html("");l.width("0%");c.text("0/0");b.ajax({type:"POST",dataType:"json",url:"index.php?option=com_synchronization",data:e,success:function(o){n=o.data*1;if(n>0){e.first="false";e.limit=g;e.offset=j;c.text("0/"+n);k.show();d.show();i()}}});function i(){if(j!==n){b.ajax({type:"POST",dataType:"json",url:"index.php?option=com_synchronization",data:e,success:function(o){var p=o.data;j=j+p;e.first="false";e.limit=g;e.offset=j;c.text(j+"/"+n);l.width((j/n*100)+"%");i()}})}}}})(jQuery);