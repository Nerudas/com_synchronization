(function(a){a(document).ready(function(){a('[onclick*="clean.clean"]').attr("id","cleanRun").removeAttr("onclick");var b=a("[data-clean-tasks]").find("[data-task]"),f=[],c=0;a(b).each(function(){f.push(a(this).data("task"))});var d=f.length;function e(){if(d>0&&c<d){var g=f[c],i=a('[data-task="'+g+'"]'),k=a(i).find(".loading"),h=a(i).find(".error"),j=a(i).find(".success");a.ajax({type:"POST",dataType:"json",url:"index.php?option=com_synchronization&task=clean."+g,cache:false,data:{},beforeSend:function(){h.hide();j.hide();k.show()},complete:function(){k.hide();c++;e()},success:function(l){if(l.success){j.show()}else{h.show();console.error(g+"\n"+l.message)}},error:function(l){h.show();console.error(g+"\n"+l.status+" "+l.statusText)}})}}a("#cleanRun").on("click",function(){c=0;e()})})})(jQuery);